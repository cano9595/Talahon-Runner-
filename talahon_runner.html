
<!index html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Talahon Runner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            background: #111;
            overflow: hidden;
        }
        canvas {
            display: block;
            margin: 0 auto;
            background: linear-gradient(to top, #222, #444);
        }
        #score {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-family: Arial, sans-serif;
            font-size: 20px;
            color: white;
            background: rgba(0,0,0,0.5);
            padding: 5px 15px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
<canvas id="game" width="400" height="600"></canvas>
<div id="score">ðŸ’¶ 0 â‚¬</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let talahon = {
    x: 175,
    y: 500,
    width: 50,
    height: 50,
    color: "#00FF88",
    lane: 1 // 0=left, 1=middle, 2=right
};

let money = [];
let score = 0;
let gotNumber = false;
const lanes = [75, 175, 275];

function spawnMoney() {
    const lane = Math.floor(Math.random() * 3);
    money.push({ x: lanes[lane], y: -50, width: 30, height: 30 });
}

function drawTalahon() {
    ctx.fillStyle = talahon.color;
    ctx.fillRect(talahon.x, talahon.y, talahon.width, talahon.height);
    ctx.fillStyle = "#000";
    ctx.fillText("ðŸ§¢", talahon.x + 10, talahon.y + 30); // Cap Symbol
}

function drawMoney() {
    ctx.fillStyle = "#33FF00";
    money.forEach(m => {
        ctx.fillRect(m.x, m.y, m.width, m.height);
        ctx.fillStyle = "#000";
        ctx.fillText("ðŸ’¶", m.x + 5, m.y + 20);
        ctx.fillStyle = "#33FF00";
    });
}

function update() {
    money.forEach(m => m.y += 4);
    // Collision check
    for (let i = money.length - 1; i >= 0; i--) {
        let m = money[i];
        if (
            m.x < talahon.x + talahon.width &&
            m.x + m.width > talahon.x &&
            m.y < talahon.y + talahon.height &&
            m.y + m.height > talahon.y
        ) {
            score += 100;
            money.splice(i, 1);
            document.getElementById("score").innerHTML = `ðŸ’¶ ${score} â‚¬`;
            if (score >= 1000 && !gotNumber) {
                gotNumber = true;
                alert("ðŸ“± Nummer einer Frau gesichert!");
            }
        }
    }
    money = money.filter(m => m.y < canvas.height + 50);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawTalahon();
    drawMoney();
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

setInterval(spawnMoney, 1000);
gameLoop();

// Touch controls
let startX = null;
canvas.addEventListener("touchstart", e => {
    startX = e.touches[0].clientX;
});

canvas.addEventListener("touchend", e => {
    const endX = e.changedTouches[0].clientX;
    const diff = endX - startX;
    if (diff > 30 && talahon.lane < 2) {
        talahon.lane++;
    } else if (diff < -30 && talahon.lane > 0) {
        talahon.lane--;
    }
    talahon.x = lanes[talahon.lane];
});
</script>
</body>
</html>
